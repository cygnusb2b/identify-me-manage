<h5 class="text-muted">Edit Draft Form</h5>
<p>{{model.updatedAt}}</p>
<hr>
{{#form-builder form=model as |builder|}}
  <div class="row">
    <div class="col">
      {{input type="text" value=model.name class="form-control"}}
      {{#-bs/button "success" click=(action builder.save)}}Save{{/-bs/button}}
    </div>
  </div>

  <div class="row">
    <div class="col hidden-md-down pt-3" style="max-width: 325px">
      <div class="card mb-3">
        <div class="card-header">Global Fields</div>
        <ul class="list-group list-group-flush">
          {{#each builder.fieldsGlobal as |field|}}
            <li class="list-group-item list-group-item-action justify-content-between clickable" title="{{ field.label }}" {{action builder.assignField "app" field}}>
              {{ field.label }}
              {{!-- {{#-bs/tooltip class="badge badge-default badge-pill" title=type.description cursor="help"}}{{-ion "help"}}{{/-bs/tooltip}} --}}
            </li>
          {{/each}}
        </ul>
      </div>

      <div class="card mb-3">
        <div class="card-header">Library Fields</div>
        <ul class="list-group list-group-flush">
        </ul>
      </div>

      <div class="card mb-3">
        <div class="card-header">Create Custom Field</div>
        <ul class="list-group list-group-flush">
          {{#each builder.fieldTypes as |type|}}
            <li class="list-group-item list-group-item-action justify-content-between clickable" title="{{ type.description }}" {{action builder.createField type}}>
              {{ type.title }}
              {{#-bs/tooltip class="badge badge-default badge-pill" title=type.description cursor="help"}}{{-ion "help"}}{{/-bs/tooltip}}
            </li>
          {{/each}}
        </ul>
      </div>
    </div>
    {{#sortable-group class="col pt-3 form-canvas" onChange=(action builder.reorderFields) as |group|}}
      {{#each builder.fieldsSorted as |field index|}}
        {{#sortable-item class="p-2 form-field" model=field group=group handle=".form-sort-handle"}}
          {{form-builder/selected-field
            field=field
            index=index
            fieldCount=builder.fieldsSorted.length
            on-edit=(action builder.selectField field)
            on-remove=(action builder.removeField field)
            on-move-up=(action builder.moveField index 'up')
            on-move-down=(action builder.moveField index 'down')
          }}
        {{/sortable-item}}
      {{/each}}
    {{/sortable-group}}
  </div>

  {{#-bs/modal show=builder.hasSelectedField size="large" backdrop="static" as |modal|}}
    {{#modal.header as |header|}}
      {{#header.title tagName="div"}}
        <h5 class="text-primary">{{builder.selectedField.type.title}}</h5>
        <p class="text-muted mb-0">{{builder.selectedField.type.description}}</p>
      {{/header.title}}
      {{!-- {{header.closeIcon class="field-editor"}} --}}
    {{/modal.header}}
    {{#modal.body}}
      {{form-builder/field-editor field=builder.selectedField}}
    {{/modal.body}}
    {{#modal.footer}}
      {{#-bs/button "primary" click=(action builder.applyFieldValues)}}{{-ion "checkmark-round"}} Apply{{/-bs/button}}
    {{/modal.footer}}
  {{/-bs/modal}}
{{/form-builder}}


